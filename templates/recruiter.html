{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Job Posting</h3>
  <a class="btn btn-primary" href="{{ url_for('edit_jd') }}">Create Job</a>
</div>

<table class="table table-hover align-middle">
  <thead>
    <tr><th>Job ID</th><th>Title</th><th>Status</th><th>Applicants</th><th class="text-end">Actions</th></tr>
  </thead>
  <tbody>
    {% if jds %}
      {% for jd in jds %}
      <tr>
        <td>{{ jd.code }}</td>
        <td>{{ jd.title }}</td>
        <td><span class="badge {% if jd.status=='published' %}bg-success{% else %}bg-secondary{% endif %}">{{ jd.status|capitalize }}</span></td>
        <td>{{ counts[jd.code] if counts and jd.code in counts else 0 }}</td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('view_candidates', code=jd.code) }}">View Candidates</a>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('edit_jd') }}?code={{ jd.code }}">Edit</a>
          <a class="btn btn-sm btn-outline-danger" href="{{ url_for('delete_jd', code=jd.code) }}" onclick="return confirm('Delete JD?');">Delete</a>
        </td>
      </tr>
      {% endfor %}
    {% else %}
      <tr><td colspan="5" class="text-muted">No job postings yet</td></tr>
    {% endif %}
  </tbody>
</table>
{% endblock %}
