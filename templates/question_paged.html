{% extends "base_public.html" %}
{% block title %}Questions{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto space-y-4">

  <!-- Header with progress -->
  <div class="flex items-center justify-between text-sm text-gray-700">
    <div class="font-medium">{{ name }}</div>
    <div>Question {{ idx + 1 }} of {{ n }}</div>
  </div>
  <div class="h-1.5 w-full bg-gray-200 rounded-full overflow-hidden">
    <div class="h-full bg-blue-600" style="width: {{ (idx / n * 100)|round(0, 'floor') }}%"></div>
  </div>

  <!-- Question card -->
  <div class="bg-white rounded-xl ring-1 ring-gray-200 p-4">
    <div class="inline-flex items-center rounded-full bg-gray-100 text-gray-700 px-2 py-0.5 text-[11px] mb-2">
      Discussion • Question {{ idx + 1 }}
    </div>
    <div class="text-sm text-gray-900 font-medium">
      {{ q }}
    </div>
  </div>

  <!-- Answer card -->
  <form method="post" class="bg-white rounded-xl ring-1 ring-gray-200 p-4 space-y-2">
    <label class="block text-sm font-medium text-gray-900">Your Response</label>
    <textarea name="answer" rows="6"
              class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
              maxlength="1000"
              placeholder="Share your response here.">{{ a }}</textarea>
    <div class="flex items-center justify-between">
      <span class="text-xs text-gray-500"><span id="count">{{ a|length }}</span>/1000</span>
      <div class="flex gap-2">
        <a href="{{ url_for('question_paged', tenant=tenant_slug or tenant.slug if tenant is defined else None, code=code, cid=cid, idx=idx - 1) }}"
           class="inline-flex items-center rounded-md border px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 {% if idx == 0 %}pointer-events-none opacity-50{% endif %}">
          ← Previous
        </a>
        <button type="submit"
                class="inline-flex items-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-blue-700">
          {% if idx + 1 < n %}Next Question →{% else %}Submit →{% endif %}
        </button>
      </div>
    </div>
  </form>
</div>
{% endblock %}

{% block body_extra %}
<script>
  const ta = document.querySelector('textarea[name="answer"]');
  const counter = document.getElementById('count');
  ta?.addEventListener('input', () => {
    counter.textContent = (ta.value || '').length;
  });
</script>
{% endblock %}
{% extends "base_public.html" %}
{% block title %}Questions{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto space-y-4">

  <!-- Header with progress -->
  <div class="flex items-center justify-between text-sm text-gray-700">
    <div class="font-medium">{{ name }}</div>
    <div>Question {{ idx + 1 }} of {{ n }}</div>
  </div>
  <div class="h-1.5 w-full bg-gray-200 rounded-full overflow-hidden">
    <div class="h-full bg-blue-600" style="width: {{ (idx / n * 100)|round(0, 'floor') }}%"></div>
  </div>

  <!-- Question card -->
  <div class="bg-white rounded-xl ring-1 ring-gray-200 p-4">
    <div class="inline-flex items-center rounded-full bg-gray-100 text-gray-700 px-2 py-0.5 text-[11px] mb-2">
      Discussion • Question {{ idx + 1 }}
    </div>
    <div class="text-sm text-gray-900 font-medium">
      {{ q }}
    </div>
  </div>

  <!-- Answer card -->
  <form method="post" class="bg-white rounded-xl ring-1 ring-gray-200 p-4 space-y-2">
    <label class="block text-sm font-medium text-gray-900">Your Response</label>
    <textarea name="answer" rows="6"
              class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
              maxlength="1000"
              placeholder="Share your response here.">{{ a }}</textarea>
    <div class="flex items-center justify-between">
      <span class="text-xs text-gray-500"><span id="count">{{ a|length }}</span>/1000</span>
      <div class="flex gap-2">
        <a href="{{ url_for('question_paged', tenant=tenant_slug or tenant.slug if tenant is defined else None, code=code, cid=cid, idx=idx - 1) }}"
           class="inline-flex items-center rounded-md border px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 {% if idx == 0 %}pointer-events-none opacity-50{% endif %}">
          ← Previous
        </a>
        <button type="submit"
                class="inline-flex items-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-blue-700">
          {% if idx + 1 < n %}Next Question →{% else %}Submit →{% endif %}
        </button>
      </div>
    </div>
  </form>
</div>
{% endblock %}

{% block body_extra %}
<script>
  const ta = document.querySelector('textarea[name="answer"]');
  const counter = document.getElementById('count');
  ta?.addEventListener('input', () => {
    counter.textContent = (ta.value || '').length;
  });
</script>
{% endblock %}
