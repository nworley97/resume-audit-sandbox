<aside id="app-sidebar" class="app-sidebar bg-white border-r border-gray-200 relative">
  <!-- Brand / tenant - Analytics style -->
  <div class="brand">
    <div class="brand-logo-wrap">
      <!-- Analytics-style logo container -->
      <div class="brand-logo rounded-full bg-gray-900 text-white text-xs flex items-center justify-center overflow-hidden">
        {% if tenant and tenant.logo_url %}
          <img src="{{ tenant.logo_url }}" alt="{{ tenant.display_name }} logo" class="w-full h-full object-cover rounded-full">
        {% else %}
          {{ (brand_name[:2] if brand_name else 'AL') | upper }}
        {% endif %}
      </div>
    </div>
    <div class="brand-name">
      <span class="text-sm font-medium text-slate-900 leading-tight truncate max-w-[9rem]">
        {{ brand_name or 'Altera' }}
      </span>
    </div>
  </div>

  <!-- Nav -->
  <nav class="px-2">
    <!-- Job Posting -->
    {% set base_classes = 'flex items-center rounded-lg text-sm transition py-2' %}
    {% set job_active_endpoints = ['recruiter', 'edit_jd'] %}
    <a href="{{ url_for('recruiter', tenant=tenant.slug if tenant else None) }}"
       class="{{ base_classes }} gap-2 px-3 {{ 'bg-primary/10 text-primary' if request.endpoint in job_active_endpoints else 'text-slate-900 hover:bg-gray-50' }}">
      <!-- Lucide layout-grid icon -->
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <rect x="3" y="3" width="7" height="7" rx="1"></rect>
        <rect x="14" y="3" width="7" height="7" rx="1"></rect>
        <rect x="14" y="14" width="7" height="7" rx="1"></rect>
        <rect x="3" y="14" width="7" height="7" rx="1"></rect>
      </svg>
      <span class="nav-label">Job Posting</span>
    </a>

<!-- Sidebar Candidates link (drop-in) -->
<a href="{{ url_for('candidates_overview', tenant=tenant.slug if tenant else None) }}"
   class="{{ base_classes }} mt-1 gap-2 px-3 {{ 'bg-primary/10 text-primary' if request.endpoint in ['candidates_overview', 'candidate_detail', 'view_candidates'] else 'text-slate-900 hover:bg-gray-50' }}">
  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
    <path d="M18 21a8 8 0 0 0-16 0"></path>
    <circle cx="10" cy="8" r="5"></circle>
    <path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"></path>
  </svg>
  <span class="nav-label">Candidates</span>
</a>

    {% set is_analytics_active = request.path and '/recruiter/analytics' in request.path %}
{# Analytics #}
{% if tenant and tenant.slug %}
  <a href="{{ url_for('analytics_dashboard', tenant=tenant.slug) }}"
     class="{{ base_classes }} mt-1 gap-2 px-3 {{ 'bg-primary/10 text-primary' if is_analytics_active else 'text-slate-900 hover:bg-gray-50' }}">
    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M5 21v-6"></path>
      <path d="M12 21V3"></path>
      <path d="M19 21V9"></path>
    </svg>
    <span class="nav-label">Analytics</span>
  </a>
{% else %}
  <a href="{{ url_for('analytics_dashboard') }}"
     class="{{ base_classes }} mt-1 gap-2 px-3 {{ 'bg-primary/10 text-primary' if is_analytics_active else 'text-slate-900 hover:bg-gray-50' }}">
    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M5 21v-6"></path>
      <path d="M12 21V3"></path>
      <path d="M19 21V9"></path>
    </svg>
    <span class="nav-label">Analytics</span>
  </a>
{% endif %}

<!-- Divider -->
<div class="my-3 mx-2 border-t border-gray-200"></div>

<!-- Public Job Board -->
{% if tenant and tenant.slug %}
  <a href="{{ url_for('job_listings', tenant=tenant.slug) }}"
     target="_blank"
     class="{{ base_classes }} gap-2 px-3 text-slate-900 hover:bg-gray-50 group relative"
     title="View public job board (opens in new tab)">
    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
      <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
    </svg>
    <span class="nav-label flex-1">Job Board</span>
    <svg class="w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
      <polyline points="15 3 21 3 21 9"></polyline>
      <line x1="10" y1="14" x2="21" y2="3"></line>
    </svg>
  </a>
  
  <!-- Copy Link Button -->
  <button type="button"
          onclick="copyJobBoardLink(event)"
          data-url="{{ url_for('job_listings', tenant=tenant.slug, _external=True) }}"
          class="{{ base_classes }} mt-1 gap-2 px-3 text-slate-600 hover:bg-teal-50 hover:text-primary group"
          title="Copy job board link">
    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
    </svg>
    <span class="nav-label text-xs">Copy Link</span>
  </button>
{% endif %}

<!-- Divider before account section -->
<div class="my-3 mx-2 border-t border-gray-200"></div>

<!-- Billing & Subscription -->
<a href="{{ url_for('billing.account') }}"
   class="{{ base_classes }} gap-2 px-3 {{ 'bg-primary/10 text-primary' if request.endpoint and 'billing' in request.endpoint else 'text-slate-900 hover:bg-gray-50' }}">
  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
    <line x1="1" y1="10" x2="23" y2="10"></line>
  </svg>
  <span class="nav-label">Billing</span>
</a>

<!-- Logout -->
<a href="{{ url_for('logout') }}"
   class="{{ base_classes }} mt-1 gap-2 px-3 text-slate-600 hover:bg-gray-50">
  <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
    <polyline points="16 17 21 12 16 7"></polyline>
    <line x1="21" y1="12" x2="9" y2="12"></line>
  </svg>
  <span class="nav-label">Logout</span>
</a>

  <!-- Powered by - Analytics style -->
  <div class="sidebar-footer">
    <img src="{{ url_for('static', filename='img/favicon-16x16.png') }}" alt="Altera mark" class="w-4 h-4 rounded" />
    <a href="https://alterasf.com/" target="_blank" rel="noopener noreferrer" class="sidebar-footer-label hover:text-slate-700 hover:underline cursor-pointer transition-colors duration-200">
      Powered by AlteraSF
    </a>
  </div>
</aside>
